(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("q-page",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row text-subtitle1"},[e._v("Please choose your file type")]),a("div",{staticClass:"row"},[a("q-uploader",{attrs:{url:"apis/upload",label:"WAV and MP3 file are accepted",accept:".wav, .mp3"},on:{rejected:e.onRejected,added:e.onAdded}})],1),e.duration>0?a("div",[a("div",{staticClass:"row q-pt-sm text-body2"},[e._v("\n        Your audio file is about "),a("b",[e._v(" "+e._s(e.duration)+" ")]),e._v(" seconds\n        long\n      ")]),a("div",{staticClass:"row text-subtitle1 q-pt-sm"},[e._v("\n        Which part you prefer to analysis?\n      ")]),a("div",{staticClass:"row q-pt-sm"},[a("q-list",{attrs:{dense:""}},[a("q-item",[a("q-item-section",[a("div",{staticClass:"row items-center"},[a("q-radio",{attrs:{val:"full"},model:{value:e.analyze_type,callback:function(t){e.analyze_type=t},expression:"analyze_type"}}),a("q-item-label",[e._v("All file")])],1)])],1),a("q-item",[a("q-item-section",[a("div",{staticClass:"row items-start"},[a("q-radio",{attrs:{val:"part"},model:{value:e.analyze_type,callback:function(t){e.analyze_type=t},expression:"analyze_type"}}),a("q-item-label",[e._v("From\n                  "),a("q-input",{staticClass:"inline-block",staticStyle:{"max-width":"5em"},attrs:{"input-class":"text-center",dense:"",type:"number",rules:[function(e){return e>0||(t.audio_start=1)}]},model:{value:e.audio_start,callback:function(t){e.audio_start=t},expression:"audio_start"}}),e._v("\n                  second to\n                  "),a("q-input",{staticClass:"inline-block",staticStyle:{"max-width":"5em"},attrs:{"input-class":"text-center",dense:"",type:"number",rules:[function(i){return i<=t.duration||(t.audio_end=e.duration)}]},model:{value:e.audio_end,callback:function(t){e.audio_end=t},expression:"audio_end"}}),e._v("\n                  second. (Please do not exceed\n                  "),a("b",[e._v(e._s(this.duration))]),e._v(" seconds)")],1)],1)])],1)],1)],1),a("div",{staticClass:"row"},[a("q-input",{staticStyle:{"min-width":"30em"},attrs:{type:"number","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type time gap"},function(t){return t>0||"The time gap should be positive"}],label:"Please type the time gap you prefer to have",suffix:"seconds"},model:{value:e.time_gap,callback:function(t){e.time_gap=t},expression:"time_gap"}})],1),e.num_intact>0||e.num_non_intact>0?a("div",{staticClass:"row text-body1"},[e._v("\n        Your audio file will be cut into\n        "),a("b",[e._v(" "+e._s(e.num_intact)+" ")]),e._v(" intact parts. The rest non-intact\n        part contains "),a("b",[e._v(" "+e._s(e.num_non_intact)+" ")]),e._v(" seconds\n      ")]):e._e(),a("div",{staticClass:"row text-subtitle1 q-pt-sm"},[e._v("\n        Please choose the picture you want to output:\n      ")]),a("div",{staticClass:"row"},[a("q-option-group",{attrs:{type:"checkbox",options:e.picture_options,color:"primary",inline:""},model:{value:e.pictures,callback:function(t){e.pictures=t},expression:"pictures"}})],1),a("div",{staticClass:"row"},[a("q-btn",{attrs:{label:"Submit",color:"primary"},on:{click:e.submit}})],1),a("div",{class:{row:!0,"q-pt-sm":!0,"justify-center":e.image_loading}},[e.image_loading?a("q-spinner-hourglass",{attrs:{color:"purple",size:"4em"}}):e._e(),e.output_images.length>0?a("viewer",{ref:"viewer",attrs:{options:e.viewer_options,images:e.output_images},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.images,(function(t){var i=t.src,s=t.alt;return a("div",{key:i,staticStyle:{display:"inline-block"}},[a("img",{staticStyle:{height:"200px",cursor:"pointer",margin:"5px",display:"inline-block"},attrs:{src:i,alt:s}}),a("div",{staticClass:"text-subtitle1 text-center"},[e._v(e._s(s))])])}))}}],null,!1,3755361543)}):e._e()],1)]):e._e()])])},s=[],n=(i("0808"),i("172a")),o={components:{Viewer:n["a"]},name:"PageIndex",methods:{submit:function(){if(null==this.time_gap)return void this.$q.notify({type:"negative",message:"Please type the time gap"});if(0==this.pictures.length)return void this.$q.notify({type:"negative",message:"Please select the picture"});"full"==this.audio_end&&(this.audio_start=1,this.audio_end=this.duration);let t={gap_val:this.time_gap,pictures:this.pictures,start:this.audio_start,end:this.audio_end};console.log(t),this.output_images=[],this.image_loading=!0,fetch("apis/submit",{method:"POST",body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.output_images=t,this.image_loading=!1})).catch((()=>{this.$q.notify({type:"negative",message:"Failed to load images"}),this.image_loading=!1})),this.$q.notify({type:"positive",message:`${JSON.stringify(t)}`})},onRejected(t){console.log(t),this.$q.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})},onAdded(t){var e=t[0],i=new FileReader;i.onload=t=>{var e=new(window.AudioContext||window.webkitAudioContext);e.decodeAudioData(t.target.result,(t=>{this.duration=parseInt(t.duration),this.audio_start=1,this.audio_end=this.duration,console.log("The duration of the song is of: "+this.duration+" seconds")}))},i.onerror=function(t){console.error("An error ocurred reading the file: ",t)},i.readAsArrayBuffer(e),this.output_images=[],this.duration=null,this.time_gap=null,this.audio_start=null,this.audio_end=null,this.analyze_type="full"}},computed:{num_intact:function(){return null===this.duration||null===this.time_gap||this.time_gap<=0?0:parseInt(this.selected_duration/this.time_gap)},num_non_intact:function(){return null===this.duration||null===this.time_gap||this.time_gap<=0?0:this.selected_duration%this.time_gap},selected_duration:function(){return null===this.audio_end||null===this.audio_end?0:this.audio_end-this.audio_start+1}},data(){return{picture_options:[{label:"STFT 2D",value:"stft_2d"},{label:"STFT 3D",value:"stft_3d"},{label:"waveletes 2D",value:"waveletes_2d"},{label:"waveletes 3D",value:"waveletes_3d"}],audio_start:null,audio_end:null,duration:null,analyze_type:"full",time_gap:null,pictures:[],output_images:[],image_loading:!1,viewer_options:{toolbar:!1,inline:!1,title:[1,(t,e)=>`${t.alt}`],transition:!1,rotatable:!1,transition:!1,navbar:!1}}}},l=o,r=i("2877"),u=i("9989"),d=i("ee89"),c=i("1c1c"),p=i("66e5"),_=i("4074"),m=i("3786"),h=i("0170"),v=i("27f9"),g=i("9f0a"),f=i("9c40"),y=i("9149"),b=i("eebe"),w=i.n(b),q=Object(r["a"])(l,a,s,!1,null,null,null);e["default"]=q.exports;w()(q,"components",{QPage:u["a"],QUploader:d["a"],QList:c["a"],QItem:p["a"],QItemSection:_["a"],QRadio:m["a"],QItemLabel:h["a"],QInput:v["a"],QOptionGroup:g["a"],QBtn:f["a"],QSpinnerHourglass:y["a"]})}}]);